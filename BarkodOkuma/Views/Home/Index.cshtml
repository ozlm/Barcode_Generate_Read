@model IEnumerable<BarkodOkuma.Data.listEnvanter_Result>

@{
    ViewBag.Title = "Index";
}


@*<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>

    <title>Barkod</title>
    <meta name="description" content="website description" />
    <meta name="keywords" content="website keywords, website keywords" />

    <link href="~/bootstrap-4.1.1-dist/css/bootstrap.css" rel="stylesheet" />
    <link href="~/bootstrap-4.1.1-dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="~/bootstrap-4.1.1-dist/js/bootstrap.js"></script>
    <script src="~/bootstrap-4.1.1-dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <style>
        div.container {
            /*border: 1px solid #000000;*/
            overflow: hidden;
            width: 100%;
        }

        div.sol {
            width: 50%;
            float: left;
            /*background-color: #66FF33;*/
        }

        div.sag {
            width: 50%;
            float: right;
            /*background-color: #F5B800;*/
        }
    </style>


    <script>
        $('#file').on("change", function () {
            for (i = 0; i < $('form').length; i++) {
                if ($('form').get(i)[0].value != "") /* get the file tag, you have to customize this code */ {
                    var formdata = new FormData($('form').get(i));
                    CallService(formdata);
                    break;
                }
            }
        });
        function CallService(file) {
            $.ajax({
                url: '@Url.Action("Scan", "Barkod")',
                type: 'POST',
                data: file,
                cache: false,
                processData: false,
                contentType: false,
                success: function (barcode) {
                    alert(barcode);
                },
                error: function () {
                    alert("ERROR");
                }
            });
        }

    </script>


</head>
<body>

    <div class="container" style="overflow: hidden; width: 100%;">
        <div class="sol text-center">
           <h3>ÜRÜN LİSTESİ</h3>
            <table class="table">
                <tr>

                    <th>
                        @Html.DisplayNameFor(model => model.STOKKODU)
                    </th>

                    <th></th>
                </tr>

                @foreach (var item in Model)
                {
                    <tr>

                        <td>
                            @Html.DisplayFor(modelItem => item.STOKKODU)
                        </td>

                        <td>
                            <a href="@Url.Action("Barkod", "Barkod", new { item.BARCODE })" class="btn btn-warning">Barkod</a>


                        </td>
                    </tr>
                }

            </table>

        </div>
        <div class="sag text-center">
            <h3>BARKOD OKU</h3>


           
               @using (Html.BeginForm("Scan", "Barkod", FormMethod.Post,
                            new { enctype = "multipart/form-data" }))
               {

                <input type="file" name="file" id="file" style="width: 100%;" class=" text-center alert-warning " />
                  <p>   </p>
               <input type="submit" value="Upload" class="submit btn btn-success"  />
               }
    

                   

            

        </div>
    </div>
</body>

</html>*@


<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BARKOD OKUMA SİSTEMİ</title>
    <link href="~/bootstrap-4.1.1-dist/css/bootstrap.css" rel="stylesheet" />
    <link href="~/bootstrap-4.1.1-dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="~/bootstrap-4.1.1-dist/js/bootstrap.js"></script>
    <script src="~/bootstrap-4.1.1-dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  

    <link rel="stylesheet" media="screen and (min-device-width: 1440px)" href="~/css/desktop.css" />

    <link rel='stylesheet' media='screen and (min-width: 800px) and (max-width: 1440px)' href='~/css/medium-style.css' />

    <link rel='stylesheet' media='screen and (min-width: 100px) and (max-width: 799px)' href='~/css/mobile-style.css' />


    <script>
    $('#file').on("change", function () {
        for (i = 0; i < $('form').length; i++) {
            if ($('form').get(i)[0].value != "") /* get the file tag, you have to customize this code */ {
                var formdata = new FormData($('form').get(i));
                CallService(formdata);
                break;
            }
        }
    });
    function CallService(file) {
        $.ajax({
            url: '@Url.Action("Scan", "Barkod")',
            type: 'POST',
            data: file,
            cache: false,
            processData: false,
            contentType: false,
            success: function (barcode) {
                alert(barcode);
            },
            error: function () {
                alert("ERROR");
            }
        });
    }

    </script>


</head>
<body>
    <div id="wrapper">
        <div id="header-content"><h3 class="text-center">BARKOD OKUMA SİSTEMİ</h3></div>

        <div id="main-content">

            <div id="inner-content">

                <div class="box">

                    <h3>ÜRÜN LİSTESİ</h3>
                    <table class="table">
                        <tr>

                            <th>
                                @Html.DisplayNameFor(model => model.STOKKODU)
                            </th>

                            <th></th>
                        </tr>

                        @foreach (var item in Model)
                        {
                            <tr>

                                <td>
                                    @Html.DisplayFor(modelItem => item.STOKKODU)
                                </td>

                                <td>
                                    <a href="@Url.Action("Barkod", "Barkod", new { item.BARCODE })" class="btn btn-warning">Barkod</a>


                                </td>
                            </tr>
                        }

                    </table>

                   
                </div>
                <div class="box">

                    <h3>BARKOD OKU</h3>



                    @using (Html.BeginForm("Scan", "Barkod", FormMethod.Post,
                            new { enctype = "multipart/form-data" }))
                    {

                        <input type="file" name="file" id="file" style="width: 100%;" class=" text-center alert-warning " />
                        <p>   </p>
                        <input type="submit" value="Ürünü Göster" class="submit btn btn-success" />
                    }


                </div>

                <br style="clear:both" />
            </div>

        </div>
        
    </div>
</body>
</html>